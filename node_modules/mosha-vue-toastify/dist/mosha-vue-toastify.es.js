var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,o=Object.getOwnPropertySymbols,n=Object.prototype.propertyIsEnumerable,s=(t,o,n)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[o]=n,i=(e,i)=>{for(var r in i||(i={}))t.call(i,r)&&s(e,r,i[r]);if(o)for(var r of o(i))n.call(i,r)&&s(e,r,i[r]);return e};import{ref as r,onMounted as l,onUnmounted as a,computed as p,defineComponent as u,openBlock as c,createBlock as h,createVNode as d,watchEffect as m,resolveComponent as v,Transition as f,withCtx as _,createCommentVNode as g,toDisplayString as w,renderSlot as y,render as b}from"vue";const I={type:"default",timeout:5e3,showCloseButton:!0,position:"top-right",transition:"bounce",hideProgressBar:!1,swipeClose:!0};var T,x;(x=T||(T={}))[x.TITLE_ONLY=0]="TITLE_ONLY",x[x.TITLE_DESCRIPTION=1]="TITLE_DESCRIPTION",x[x.COMPONENT=2]="COMPONENT",x[x.VNODE=3]="VNODE";const C={"top-left":{bounce:"mosha__bounceInLeft",zoom:"mosha__zoomIn",slide:"mosha__slideInLeft"},"top-right":{bounce:"mosha__bounceInRight",zoom:"mosha__zoomIn",slide:"mosha__slideInRight"},"top-center":{bounce:"mosha__bounceInDown",zoom:"mosha__zoomIn",slide:"mosha__slideInDown"},"bottom-center":{bounce:"mosha__bounceInUp",zoom:"mosha__zoomIn",slide:"mosha__slideInUp"},"bottom-right":{bounce:"mosha__bounceInRight",zoom:"mosha__zoomIn",slide:"mosha__slideInRight"},"bottom-left":{bounce:"mosha__bounceInLeft",zoom:"mosha__zoomIn",slide:"mosha__slideInLeft"}},M=(e,t,o)=>{const n=r(),s=r(void 0),l=r(),p=e=>e instanceof MouseEvent,u=r=>{!1!==o&&n.value&&(p(r)?s.value=n.value.clientX-r.clientX:s.value=n.value.touches[0].clientX-r.touches[0].clientX,l.value=i(i({},l.value),{transition:"none"}),e.endsWith("left")?l.value.left=-s.value+"px !important":e.endsWith("right")?l.value.right=`${s.value}px !important`:s.value>0?l.value.left=-s.value+"px !important":l.value.right=`${s.value}px !important`,Math.abs(s.value)>200&&t())},c=e=>{!1!==o&&(n.value&&(n.value=void 0),s.value&&(s.value=void 0),removeEventListener(e,u))};return a((()=>{!1!==o&&(c("mousemove"),c("touchmove"))})),{swipedDiff:s,swipeStart:n,swipeStyle:l,swipeHandler:u,startSwipeHandler:t=>{if(!1===o)return;n.value=t;const r=p(t)?"mousemove":"touchmove",a=p(t)?"mouseup":"touchend";addEventListener(r,u),addEventListener(a,(()=>(t=>{const o={transition:"left .3s ease-out",left:0},r={transition:"right .3s ease-out",right:0},a={transition:"all .3s ease-out",left:0,right:0};e.endsWith("left")?l.value=i(i({},l.value),o):e.endsWith("right")?l.value=i(i({},l.value),r):l.value=i(i({},l.value),a),n.value=void 0,s.value=void 0,removeEventListener(t,u)})(r)))},cleanUpMove:c}};var S=u({props:{type:{type:String,default:"default"}}});const z={class:"mosha__icon"},L={key:0,xmlns:"http://www.w3.org/2000/svg",height:"32px",viewBox:"0 0 24 24",width:"32px",fill:"#ffffff"},E=d("path",{d:"M4.47 21h15.06c1.54 0 2.5-1.67 1.73-3L13.73 4.99c-.77-1.33-2.69-1.33-3.46 0L2.74 18c-.77 1.33.19 3 1.73 3zM12 14c-.55 0-1-.45-1-1v-2c0-.55.45-1 1-1s1 .45 1 1v2c0 .55-.45 1-1 1zm1 4h-2v-2h2v2z"},null,-1),B={key:1,xmlns:"http://www.w3.org/2000/svg",height:"32px",viewBox:"0 0 24 24",width:"32px",fill:"#ffffff"},N=d("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 11c-.55 0-1-.45-1-1V8c0-.55.45-1 1-1s1 .45 1 1v4c0 .55-.45 1-1 1zm1 4h-2v-2h2v2z"},null,-1),O={key:2,xmlns:"http://www.w3.org/2000/svg",height:"32px",viewBox:"0 0 24 24",width:"32px",fill:"#ffffff"},P=d("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),D=d("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM9.29 16.29L5.7 12.7c-.39-.39-.39-1.02 0-1.41.39-.39 1.02-.39 1.41 0L10 14.17l6.88-6.88c.39-.39 1.02-.39 1.41 0 .39.39.39 1.02 0 1.41l-7.59 7.59c-.38.39-1.02.39-1.41 0z"},null,-1),H={key:3,xmlns:"http://www.w3.org/2000/svg",height:"32px",viewBox:"0 0 24 24",width:"32px",fill:"#616161"},k=d("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),V=d("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"},null,-1),R={key:4,xmlns:"http://www.w3.org/2000/svg",height:"32px",viewBox:"0 0 24 24",width:"32px",fill:"#ffffff"},$=d("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),j=d("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"},null,-1);S.render=function(e,t,o,n,s,i){return c(),h("span",z,["warning"===e.type?(c(),h("svg",L,[E])):"danger"===e.type?(c(),h("svg",B,[N])):"success"===e.type?(c(),h("svg",O,[P,D])):"default"===e.type?(c(),h("svg",H,[k,V])):(c(),h("svg",R,[$,j]))])};var q=u({name:"MToast",components:{MIcon:S},props:{visible:Boolean,text:{type:String,default:""},description:{type:String,default:""},toastBackgroundColor:{type:String,default:""},type:{type:String,default:"default"},onClose:{type:Function,default:()=>null},onCloseHandler:{type:Function,required:!0},offset:{type:Number,required:!0},id:{type:Number,required:!0},timeout:{type:Number,default:5e3},position:{type:String,required:!0},showCloseButton:{type:Boolean,default:!0},swipeClose:{type:Boolean,default:!0},hideProgressBar:{type:Boolean,default:!1},showIcon:{type:Boolean,default:!1},transition:{type:String,default:"bounce"}},setup(e,t){const o=r(),{swipedDiff:n,startSwipeHandler:s,swipeStyle:i,cleanUpMove:u}=M(e.position,e.onCloseHandler,e.swipeClose),{transitionType:c}=(h=e.position,d=e.transition,v=n,{transitionType:p((()=>v.value>200?"mosha__fadeOutLeft":v.value<-200?"mosha__fadeOutRight":C[h][d]))});var h,d,v;const{start:f,stop:_,progress:g}=((e,t)=>{const o=r(),n=r(0),s=r(t),i=r(),p=r(100),u=()=>{clearInterval(i.value),clearTimeout(o.value)};return l((()=>{})),a((()=>{u()})),{start:()=>{n.value=Date.now(),clearTimeout(o.value),i.value=setInterval((()=>{p.value--}),t/100-2),o.value=setTimeout(e,s.value)},stop:()=>{clearInterval(i.value),clearTimeout(o.value),s.value-=Date.now()-n.value},clear:u,progress:p}})((()=>{e.onCloseHandler()}),e.timeout),w=p((()=>t.slots.default)),y=p((()=>/<\/?[a-z][\s\S]*>/i.test(e.description))),b=()=>{e.timeout>0&&f()};return m((()=>{const{customStyle:t}=((e,t,o)=>{const n=p((()=>{switch(e){case"top-left":return{left:"0",top:`${t}px`};case"bottom-left":return{left:"0",bottom:`${t}px`};case"bottom-right":return{right:"0",bottom:`${t}px`};case"top-center":return{top:`${t}px`,left:"0",right:"0",marginRight:"auto",marginLeft:"auto"};case"bottom-center":return{bottom:`${t}px`,left:"0",right:"0",marginRight:"auto",marginLeft:"auto"};default:return{right:"0",top:`${t}px`}}}));return o.length>0&&(n.value.backgroundColor=o),{customStyle:n}})(e.position,e.offset,e.toastBackgroundColor);o.value=t.value})),l((()=>{b()})),{style:o,transitionType:c,startTimer:b,stopTimer:()=>{e.timeout>0&&_()},progress:g,onTouchStart:e=>{s(e)},onMouseLeave:()=>{u("mousemove"),b()},onMouseDown:e=>{s(e)},swipeStyle:i,isSlotPassed:w,isDescriptionHtml:y}}});const U={class:"mosha__toast__content-wrapper"},W={class:"mosha__toast__content"},X={class:"mosha__toast__content__text"},F={key:1,class:"mosha__toast__content__description"},Y={key:0,class:"mosha__toast__slot-wrapper"};q.render=function(e,t,o,n,s,i){const r=v("MIcon");return c(),h(f,{name:e.transitionType,type:"animation"},{default:_((()=>[e.visible?(c(),h("div",{key:0,class:["mosha__toast",e.toastBackgroundColor?null:e.type],style:[e.style,e.swipeStyle],onMouseenter:t[2]||(t[2]=(...t)=>e.stopTimer&&e.stopTimer(...t)),onMouseleave:t[3]||(t[3]=(...t)=>e.onMouseLeave&&e.onMouseLeave(...t)),onTouchstart:t[4]||(t[4]=(...t)=>e.onTouchStart&&e.onTouchStart(...t)),onMousedown:t[5]||(t[5]=(...t)=>e.onMouseDown&&e.onMouseDown(...t))},[d("div",U,[e.showIcon?(c(),h(r,{key:0,type:e.type},null,8,["type"])):g("",!0),d("div",W,[d("div",X,w(e.text),1),e.description.length>0&&e.isDescriptionHtml?(c(),h("div",{key:0,class:"mosha__toast__content__description",innerHTML:e.description},null,8,["innerHTML"])):g("",!0),e.description.length>0&&!e.isDescriptionHtml?(c(),h("div",F,w(e.description),1)):g("",!0)])]),e.isSlotPassed?(c(),h("div",Y,[y(e.$slots,"default")])):g("",!0),e.showCloseButton?(c(),h("div",{key:1,class:"mosha__toast__close-icon",onClick:t[1]||(t[1]=(...t)=>e.onCloseHandler&&e.onCloseHandler(...t))})):g("",!0),e.hideProgressBar?g("",!0):(c(),h("div",{key:2,class:"mosha__toast__progress",style:{width:`${e.progress}%`}},null,4))],38)):g("",!0)])),_:3},8,["name"])};const A={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[],"top-center":[],"bottom-center":[]};let G=0;const J=(e,t)=>{if(!e)return;const o=t?Z(t):I;if(e.__v_isVNode)return void K(T.VNODE,o,e);if(e.hasOwnProperty("render"))return void K(T.COMPONENT,o,e);const n=ee(e);K(T.TITLE_DESCRIPTION,o,n)},K=(e,t,o)=>{const n=te(t,A,12),s=G++,i=document.createElement("div");let r;document.body.appendChild(i),r=e===T.VNODE?d(q,Q(t,s,n,oe),(()=>[o])):e===T.TITLE_DESCRIPTION?d(q,Q(t,s,n,oe,o)):d(q,Q(t,s,n,oe),(()=>[d(o)])),b(r,i),t.position&&(A[t.position].push({toastVNode:r,container:i}),r.component&&(r.component.props.visible=!0))},Q=(e,t,o,n,s)=>i(i(i({},e),s),{id:t,offset:o,visible:!1,onCloseHandler:()=>{n(t,e.position?e.position:"top-right")}}),Z=e=>{const t=i(i({},e),{type:e.type||I.type,timeout:e.timeout||I.timeout,showCloseButton:e.showCloseButton,position:e.position||I.position,showIcon:e.showIcon,swipeClose:e.swipeClose,transition:e.transition||I.transition});return t.hideProgressBar=void 0!==t.timeout&&t.timeout<=0,void 0!==e.hideProgressBar&&(t.hideProgressBar=e.hideProgressBar),t},ee=e=>({text:"string"==typeof e?e:e.title,description:"string"==typeof e?void 0:e.description}),te=(e,t,o)=>{let n=o;if(!e.position)throw new Error("no position");return t[e.position].forEach((({toastVNode:e})=>{const t=e.el.offsetHeight+o;n+=t||0})),n},oe=(e,t)=>{const o=A[t],n=o.findIndex((({toastVNode:t})=>t.props&&e===t.props.id));if(-1===n)return;const{container:s,toastVNode:i}=o[n];if(!i.el)return;const r=i.el.offsetHeight;A[t].splice(n,1),((e,t,o,n)=>{for(let s=e;s<t.length;s++){const{toastVNode:e}=t[s];if(!e.el)return;const i=o.split("-")[0]||"top",r=parseInt(e.el.style[i],10)-n-12;if(!e.component)return;e.component.props.offset=r}})(n,o,t,r),i.component&&(i.component.props.visible=!1,i.component.props.onClose&&i.component.props.onClose(),setTimeout((()=>{b(null,s),document.body.removeChild(s)}),1e3))};const ne=(e,t)=>d(e,t);var se={install:e=>{e.config.globalProperties.$moshaToast=J,e.provide("moshaToast",J)}};export default se;export{T as ToastContentType,J as createToast,ne as withProps};
