
const keyPressed = [];

const bindHotkeys = function (targetEl, hotkeyMapping) {
  const findKey = (key) => keyPressed.findIndex((element) => element === key);
  targetEl.addEventListener('keydown', (e) => {
    e.preventDefault()
    // to prevent user from holding down a key and having a million key strokes in keyPressed
    if(findKey(e.key) !== -1 ){
      return ;
    }
    keyPressed.push(e.key);
    const keys = keyPressed.join('+');
    hotkeyMapping.hasOwnProperty(keys) && hotkeyMapping[keys]();

  });

  targetEl.addEventListener('keyup', (e) => {

    const index = findKey(e.key);
    if(index === -1){
      return;
    }
    keyPressed.splice(index, 1);
  });
}

export {bindHotkeys}
