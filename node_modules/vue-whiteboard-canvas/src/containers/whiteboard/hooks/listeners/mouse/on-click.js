import {useWhiteboardStore} from "../../../store/whiteboard";
import {useTransformer} from "../../../utils/transformer/transformer";
import Konva from "konva";
import useMove from "../../tools/useMove";

const {layer, stage} = useWhiteboardStore();
const {
  setTransformerNodes,
  clearTransformer,
  removeTransformerNode,
  addNodeToTransformer,
  isNodeInTransformer,
  initTransformer,
} = useTransformer();

const {selectionRectangle} = useMove();

export function onMouseClick(event){
  // deprecated since 24 nov 2020
  // // if we are selecting with rect, do nothing
  // if (selectionRectangle.value.visible()) {
  //   return;
  // }
  //
  // initTransformer();
  // console.log('on mouse click');
  //
  // // if click on empty area - remove all selections
  // if (event.target instanceof Konva.Stage) {
  //   clearTransformer();
  //   return;
  // }
  //
  // console.log('clicked on shape')
  //
  //
  // // do we pressed shift or ctrl?
  // const metaPressed = event.evt.shiftKey || event.evt.ctrlKey || event.evt.metaKey;
  // const isSelected = isNodeInTransformer(event.target);
  //
  // if (!metaPressed && !isSelected) {
  //   // if no key pressed and the node is not selected
  //   // select just one
  //   setTransformerNodes([event.target]);
  //   console.log('selected');
  //
  // } else if (metaPressed && isSelected) {
  //   // if we pressed keys and node was selected
  //   // we need to remove it from selection:
  //   removeTransformerNode(event.target);
  // } else if (metaPressed && !isSelected) {
  //   // add the node into selection
  //   addNodeToTransformer(event.target);
  // }
  // layer.value.batchDraw();

}
