<template>

  <nav class="nav">
    <ul>
      <li :class="{'tool-selected': isSelected(tool)}" @click="setTool(tool)" v-for="tool in tools" :key="tool">{{ tool.name }}</li>
    </ul>
  </nav>

</template>

<script>
import {useWhiteboardStore} from "./store/whiteboard";
import useClearAll from "./hooks/tools/useClearAll";
import {useWhiteboardEventListeners} from "./hooks/listeners/whiteboard";

const {clearAll} = useClearAll();
const { toolSelected, setToolSelected, states } = useWhiteboardStore();
const { onToolChange } = useWhiteboardEventListeners();


export default {
  name: 'WhiteboardToolbar',
  data() {
    return {
      tools: [
        {
          name: 'Move',
          icon: '',
        },
        {
          name: 'Pencil',
          icon: '',
        },
        {
          name: 'Line',
          icon: '',
        },
        {
          name: 'Text',
          icon: '',
        },
        {
          name: 'Rectangle',
          icon: '',
        },
        {
          name: 'Circle',
          icon: '',
        },
        {
          name: 'Eraser',
          icon: 'Eraser',
        },
        {
          name: 'Pan',
          icon: 'pan',
        },
        {
          name: 'Clear all',
          icon: 'Clear all',
          onClick: () =>  clearAll(),
        },

      ]
    }
  },
  props: {},
  computed: {

  },
  methods: {
    isSelected(tool) {
      return toolSelected.value?.toLowerCase() === tool.name?.toLowerCase();
    },
    setTool(tool) {
      onToolChange(tool.name);

      if(tool.hasOwnProperty('onClick')){
        tool.onClick();
      }
    }
  },
  mounted() {

  },
}
</script>

<style scoped lang="scss">
.tool-selected{
  background-color: #cbcbcb;
  color: aliceblue;
}
.nav {
  display: flex;

  ul {
    display: flex;
    list-style: none;
    padding-left: 0;

    li {
      margin-left: 5px;
      margin-right: 5px;
      padding: 5px;
      padding-left: 10px;
      padding-right: 10px;
      cursor: pointer;
      border-radius: 5px;

      &:hover {
        background-color: #cbcbcb;
      }
    }
  }
}
</style>
