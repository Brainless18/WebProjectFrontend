import {reactive, ref, computed } from 'vue';

const states = reactive({
  isDrawing: false,

  clickCounter: 0,  // helpful for line tool

})

const currentDrawingObject = ref({});
const layer = ref({});
const tempLayer = ref({});
const stage = ref({});
const toolSelected = ref('move');
const lastMouseClickPos = reactive({
  xPos: 0,
  yPos: 0,
});

const lastMouseClickAbsPos = reactive({
  xPos: 0,
  yPos: 0,
});


const isFirstClick = () => {
  return states.clickCounter === 1;
}

const isSecondClick = () => {
  return states.clickCounter === 2;
}


const setToolSelected = (tool) => {
  states.clickCounter = 0;
  toolSelected.value = tool?.toLowerCase();
}

export function useWhiteboardStore(){

  return {
    states,
    currentDrawingObject,
    layer,
    tempLayer,
    stage,
    toolSelected,
    setToolSelected,
    lastMouseClickPos,
    lastMouseClickAbsPos,
    isFirstClick,
    isSecondClick
  }
}

