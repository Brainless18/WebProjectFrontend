{"remainingRequest":"D:\\Programming\\Web\\project\\model-project\\node_modules\\babel-loader\\lib\\index.js!D:\\Programming\\Web\\project\\model-project\\src\\tools\\history.js","dependencies":[{"path":"D:\\Programming\\Web\\project\\model-project\\src\\tools\\history.js","mtime":1558265013000},{"path":"D:\\Programming\\Web\\project\\model-project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Programming\\Web\\project\\model-project\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJEOi9Qcm9ncmFtbWluZy9XZWIvcHJvamVjdC9tb2RlbC1wcm9qZWN0L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiRDovUHJvZ3JhbW1pbmcvV2ViL3Byb2plY3QvbW9kZWwtcHJvamVjdC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7Cgp2YXIgSGlzdG9yeSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gSGlzdG9yeShsaW1pdCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEhpc3RvcnkpOwoKICAgIHRoaXMubGltaXQgPSBsaW1pdDsKICAgIHRoaXMuY2xlYXIoKTsKICB9CgogIF9jcmVhdGVDbGFzcyhIaXN0b3J5LCBbewogICAga2V5OiAiYWRkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhZGQoYWN0aW9uKSB7CiAgICAgIGlmICh0aGlzLmhpc3RvcnkubGVuZ3RoID49IHRoaXMubGltaXQgfHwgdGhpcy5jdXJyZW50ID09IHRoaXMuaGlzdG9yeS5sZW5ndGggLSAxKSB7CiAgICAgICAgdGhpcy5oaXN0b3J5LnNoaWZ0KCk7CiAgICAgIH0KCiAgICAgIHRoaXMuaGlzdG9yeS5wdXNoKGFjdGlvbik7CiAgICAgIHRoaXMuY3VycmVudCA9IHRoaXMuaGlzdG9yeS5sZW5ndGg7CiAgICB9CiAgfSwgewogICAga2V5OiAidW5kbyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdW5kbygpIHsKICAgICAgaWYgKHRoaXMuY3VycmVudCA+IDApIHsKICAgICAgICB0aGlzLmhpc3RvcnlbLS10aGlzLmN1cnJlbnRdLnVuZXhlYygpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAicmVkbyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVkbygpIHsKICAgICAgaWYgKHRoaXMuaGlzdG9yeS5sZW5ndGggPiB0aGlzLmN1cnJlbnQpIHsKICAgICAgICB0aGlzLmhpc3RvcnlbdGhpcy5jdXJyZW50KytdLmV4ZWMoKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImNsZWFyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjbGVhcigpIHsKICAgICAgdGhpcy5oaXN0b3J5ID0gW107CiAgICAgIHRoaXMuY3VycmVudCA9IDA7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gSGlzdG9yeTsKfSgpOyAvLyBEZWZhdWx0IHNpemUgMjAKCgpleHBvcnQgZGVmYXVsdCBuZXcgSGlzdG9yeSgyMCk7"},{"version":3,"sources":["D:/Programming/Web/project/model-project/src/tools/history.js"],"names":["History","limit","clear","action","history","length","current","shift","push","unexec","exec"],"mappings":";;;;IAAMA,O;AACF,mBAAYC,KAAZ,EAAmB;AAAA;;AACf,SAAKA,KAAL,GAAaA,KAAb;AACA,SAAKC,KAAL;AACH;;;;WACD,aAAIC,MAAJ,EAAY;AACR,UAAI,KAAKC,OAAL,CAAaC,MAAb,IAAuB,KAAKJ,KAA5B,IAAqC,KAAKK,OAAL,IAAgB,KAAKF,OAAL,CAAaC,MAAb,GAAsB,CAA/E,EAAkF;AAC9E,aAAKD,OAAL,CAAaG,KAAb;AACH;;AACD,WAAKH,OAAL,CAAaI,IAAb,CAAkBL,MAAlB;AACA,WAAKG,OAAL,GAAe,KAAKF,OAAL,CAAaC,MAA5B;AACH;;;WACD,gBAAO;AACH,UAAI,KAAKC,OAAL,GAAe,CAAnB,EAAsB;AAClB,aAAKF,OAAL,CAAa,EAAE,KAAKE,OAApB,EAA6BG,MAA7B;AACH;AACJ;;;WACD,gBAAO;AACH,UAAI,KAAKL,OAAL,CAAaC,MAAb,GAAsB,KAAKC,OAA/B,EAAwC;AACpC,aAAKF,OAAL,CAAa,KAAKE,OAAL,EAAb,EAA6BI,IAA7B;AACH;AACJ;;;WACD,iBAAQ;AACJ,WAAKN,OAAL,GAAe,EAAf;AACA,WAAKE,OAAL,GAAe,CAAf;AACH;;;;KAGL;;;AACA,eAAe,IAAIN,OAAJ,CAAY,EAAZ,CAAf","sourcesContent":["class History {\n    constructor(limit) {\n        this.limit = limit;\n        this.clear();\n    }\n    add(action) {\n        if (this.history.length >= this.limit || this.current == this.history.length - 1) {\n            this.history.shift();\n        }\n        this.history.push(action);\n        this.current = this.history.length;\n    }\n    undo() {\n        if (this.current > 0) {\n            this.history[--this.current].unexec();\n        }\n    }\n    redo() {\n        if (this.history.length > this.current) {\n            this.history[this.current++].exec();\n        }\n    }\n    clear() {\n        this.history = [];\n        this.current = 0;\n    }\n}\n\n// Default size 20\nexport default new History(20);\n"]}]}